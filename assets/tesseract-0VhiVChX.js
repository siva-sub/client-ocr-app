var ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function dt(r){if(r.__esModule)return r;var i=r.default;if(typeof i=="function"){var s=function l(){return this instanceof l?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};s.prototype=i.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(r).forEach(function(l){var y=Object.getOwnPropertyDescriptor(r,l);Object.defineProperty(s,l,y.get?y:{enumerable:!0,get:function(){return r[l]}})}),s}var de={exports:{}};(function(r){var i=function(s){var l=Object.prototype,y=l.hasOwnProperty,E=Object.defineProperty||function(o,e,n){o[e]=n.value},p,v=typeof Symbol=="function"?Symbol:{},b=v.iterator||"@@iterator",O=v.asyncIterator||"@@asyncIterator",k=v.toStringTag||"@@toStringTag";function f(o,e,n){return Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),o[e]}try{f({},"")}catch{f=function(e,n,c){return e[n]=c}}function L(o,e,n,c){var t=e&&e.prototype instanceof D?e:D,a=Object.create(t.prototype),u=new K(c||[]);return E(a,"_invoke",{value:Z(o,n,u)}),a}s.wrap=L;function A(o,e,n){try{return{type:"normal",arg:o.call(e,n)}}catch(c){return{type:"throw",arg:c}}}var R="suspendedStart",$="suspendedYield",P="executing",N="completed",w={};function D(){}function C(){}function m(){}var z={};f(z,b,function(){return this});var B=Object.getPrototypeOf,U=B&&B(B(H([])));U&&U!==l&&y.call(U,b)&&(z=U);var I=m.prototype=D.prototype=Object.create(z);C.prototype=m,E(I,"constructor",{value:m,configurable:!0}),E(m,"constructor",{value:C,configurable:!0}),C.displayName=f(m,k,"GeneratorFunction");function J(o){["next","throw","return"].forEach(function(e){f(o,e,function(n){return this._invoke(e,n)})})}s.isGeneratorFunction=function(o){var e=typeof o=="function"&&o.constructor;return e?e===C||(e.displayName||e.name)==="GeneratorFunction":!1},s.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,m):(o.__proto__=m,f(o,k,"GeneratorFunction")),o.prototype=Object.create(I),o},s.awrap=function(o){return{__await:o}};function F(o,e){function n(a,u,d,h){var g=A(o[a],o,u);if(g.type==="throw")h(g.arg);else{var M=g.arg,T=M.value;return T&&typeof T=="object"&&y.call(T,"__await")?e.resolve(T.__await).then(function(_){n("next",_,d,h)},function(_){n("throw",_,d,h)}):e.resolve(T).then(function(_){M.value=_,d(M)},function(_){return n("throw",_,d,h)})}}var c;function t(a,u){function d(){return new e(function(h,g){n(a,u,h,g)})}return c=c?c.then(d,d):d()}E(this,"_invoke",{value:t})}J(F.prototype),f(F.prototype,O,function(){return this}),s.AsyncIterator=F,s.async=function(o,e,n,c,t){t===void 0&&(t=Promise);var a=new F(L(o,e,n,c),t);return s.isGeneratorFunction(e)?a:a.next().then(function(u){return u.done?u.value:a.next()})};function Z(o,e,n){var c=R;return function(a,u){if(c===P)throw new Error("Generator is already running");if(c===N){if(a==="throw")throw u;return q()}for(n.method=a,n.arg=u;;){var d=n.delegate;if(d){var h=Y(d,n);if(h){if(h===w)continue;return h}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(c===R)throw c=N,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);c=P;var g=A(o,e,n);if(g.type==="normal"){if(c=n.done?N:$,g.arg===w)continue;return{value:g.arg,done:n.done}}else g.type==="throw"&&(c=N,n.method="throw",n.arg=g.arg)}}}function Y(o,e){var n=e.method,c=o.iterator[n];if(c===p)return e.delegate=null,n==="throw"&&o.iterator.return&&(e.method="return",e.arg=p,Y(o,e),e.method==="throw")||n!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var t=A(c,o.iterator,e.arg);if(t.type==="throw")return e.method="throw",e.arg=t.arg,e.delegate=null,w;var a=t.arg;if(!a)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w;if(a.done)e[o.resultName]=a.value,e.next=o.nextLoc,e.method!=="return"&&(e.method="next",e.arg=p);else return a;return e.delegate=null,w}J(I),f(I,k,"Generator"),f(I,b,function(){return this}),f(I,"toString",function(){return"[object Generator]"});function Q(o){var e={tryLoc:o[0]};1 in o&&(e.catchLoc=o[1]),2 in o&&(e.finallyLoc=o[2],e.afterLoc=o[3]),this.tryEntries.push(e)}function j(o){var e=o.completion||{};e.type="normal",delete e.arg,o.completion=e}function K(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(Q,this),this.reset(!0)}s.keys=function(o){var e=Object(o),n=[];for(var c in e)n.push(c);return n.reverse(),function t(){for(;n.length;){var a=n.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}};function H(o){if(o){var e=o[b];if(e)return e.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var n=-1,c=function t(){for(;++n<o.length;)if(y.call(o,n))return t.value=o[n],t.done=!1,t;return t.value=p,t.done=!0,t};return c.next=c}}return{next:q}}s.values=H;function q(){return{value:p,done:!0}}return K.prototype={constructor:K,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(j),!o)for(var e in this)e.charAt(0)==="t"&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var o=this.tryEntries[0],e=o.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var e=this;function n(h,g){return a.type="throw",a.arg=o,e.next=h,g&&(e.method="next",e.arg=p),!!g}for(var c=this.tryEntries.length-1;c>=0;--c){var t=this.tryEntries[c],a=t.completion;if(t.tryLoc==="root")return n("end");if(t.tryLoc<=this.prev){var u=y.call(t,"catchLoc"),d=y.call(t,"finallyLoc");if(u&&d){if(this.prev<t.catchLoc)return n(t.catchLoc,!0);if(this.prev<t.finallyLoc)return n(t.finallyLoc)}else if(u){if(this.prev<t.catchLoc)return n(t.catchLoc,!0)}else if(d){if(this.prev<t.finallyLoc)return n(t.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(o,e){for(var n=this.tryEntries.length-1;n>=0;--n){var c=this.tryEntries[n];if(c.tryLoc<=this.prev&&y.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var t=c;break}}t&&(o==="break"||o==="continue")&&t.tryLoc<=e&&e<=t.finallyLoc&&(t=null);var a=t?t.completion:{};return a.type=o,a.arg=e,t?(this.method="next",this.next=t.finallyLoc,w):this.complete(a)},complete:function(o,e){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&e&&(this.next=e),w},finish:function(o){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===o)return this.complete(n.completion,n.afterLoc),j(n),w}},catch:function(o){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===o){var c=n.completion;if(c.type==="throw"){var t=c.arg;j(n)}return t}}throw new Error("illegal catch attempt")},delegateYield:function(o,e,n){return this.delegate={iterator:H(o),resultName:e,nextLoc:n},this.method==="next"&&(this.arg=p),w}},s}(r.exports);try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}})(de);var ee=(r,i)=>`${r}-${i}-${Math.random().toString(16).slice(3,8)}`;const he=ee;let re=0;var se=({id:r,action:i,payload:s={}})=>{let l=r;return typeof l>"u"&&(l=he("Job",re),re+=1),{id:l,action:i,payload:s}},W={};let te=!1;W.logging=te;W.setLogging=r=>{te=r};W.log=(...r)=>te?console.log.apply(void 0,r):null;const pe=se,{log:V}=W,ge=ee;let oe=0;var ve=()=>{const r=ge("Scheduler",oe),i={},s={};let l=[];oe+=1;const y=()=>l.length,E=()=>Object.keys(i).length,p=()=>{if(l.length!==0){const f=Object.keys(i);for(let L=0;L<f.length;L+=1)if(typeof s[f[L]]>"u"){l[0](i[f[L]]);break}}},v=(f,L)=>new Promise((A,R)=>{const $=pe({action:f,payload:L});l.push(async P=>{l.shift(),s[P.id]=$;try{A(await P[f].apply(void 0,[...L,$.id]))}catch(N){R(N)}finally{delete s[P.id],p()}}),V(`[${r}]: Add ${$.id} to JobQueue`),V(`[${r}]: JobQueue length=${l.length}`),p()});return{addWorker:f=>(i[f.id]=f,V(`[${r}]: Add ${f.id}`),V(`[${r}]: Number of workers=${E()}`),p(),f.id),addJob:async(f,...L)=>{if(E()===0)throw Error(`[${r}]: You need to have at least one worker before adding jobs`);return v(f,L)},terminate:async()=>{Object.keys(i).forEach(async f=>{await i[f].terminate()}),l=[]},getQueueLen:y,getNumWorkers:E}};function ye(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function we(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var me=we;const Le=me;var Ee=r=>{const i={};return typeof WorkerGlobalScope<"u"?i.type="webworker":Le()?i.type="electron":typeof document=="object"?i.type="browser":typeof process=="object"&&typeof ye=="function"&&(i.type="node"),typeof r>"u"?i:i[r]};const be=Ee("type")==="browser",Se=be?r=>new URL(r,window.location.href).href:r=>r;var Oe=r=>{const i={...r};return["corePath","workerPath","langPath"].forEach(s=>{r[s]&&(i[s]=Se(i[s]))}),i},ke=r=>{const i=[],s=[],l=[],y=[],E=[];return r.blocks&&r.blocks.forEach(p=>{p.paragraphs.forEach(v=>{v.lines.forEach(b=>{b.words.forEach(O=>{O.symbols.forEach(k=>{E.push({...k,page:r,block:p,paragraph:v,line:b,word:O})}),y.push({...O,page:r,block:p,paragraph:v,line:b})}),l.push({...b,page:r,block:p,paragraph:v})}),s.push({...v,page:r,block:p})}),i.push({...p,page:r})}),{...r,blocks:i,paragraphs:s,lines:l,words:y,symbols:E}},ce={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Ae="5.1.1",Te={version:Ae};var _e={workerBlobURL:!0,logger:()=>{}};const Re=Te.version,$e=_e;var Pe={...$e,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Re}/dist/worker.min.js`},Ne=({workerPath:r,workerBlobURL:i})=>{let s;if(Blob&&URL&&i){const l=new Blob([`importScripts("${r}");`],{type:"application/javascript"});s=new Worker(URL.createObjectURL(l))}else s=new Worker(r);return s},Ie=r=>{r.terminate()},Me=(r,i)=>{r.onmessage=({data:s})=>{i(s)}},Ce=async(r,i)=>{r.postMessage(i)};const X=r=>new Promise((i,s)=>{const l=new FileReader;l.onload=()=>{i(l.result)},l.onerror=({target:{error:{code:y}}})=>{s(Error(`File could not be read! Code=${y}`))},l.readAsArrayBuffer(r)}),x=async r=>{let i=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?i=atob(r.split(",")[1]).split("").map(s=>s.charCodeAt(0)):i=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(i=await x(r.src)),r.tagName==="VIDEO"&&(i=await x(r.poster)),r.tagName==="CANVAS"&&await new Promise(s=>{r.toBlob(async l=>{i=await X(l),s()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){const s=await r.convertToBlob();i=await X(s)}else(r instanceof File||r instanceof Blob)&&(i=await X(r));return new Uint8Array(i)};var je=x;const Ge=Pe,De=Ne,Ue=Ie,Fe=Me,We=Ce,ze=je;var Be={defaultOptions:Ge,spawnWorker:De,terminateWorker:Ue,onMessage:Fe,send:We,loadImage:ze};const Ye=Oe,Ke=ke,S=se,{log:ne}=W,He=ee,G=ce,{defaultOptions:Je,spawnWorker:qe,terminateWorker:Ve,onMessage:Ze,loadImage:ae,send:Qe}=Be;let ie=0;var le=async(r="eng",i=G.LSTM_ONLY,s={},l={})=>{const y=He("Worker",ie),{logger:E,errorHandler:p,...v}=Ye({...Je,...s}),b={},O={},k=typeof r=="string"?r.split("+"):r;let f=i,L=l;const A=[G.DEFAULT,G.LSTM_ONLY].includes(i)&&!v.legacyCore;let R,$;const P=new Promise((t,a)=>{$=t,R=a}),N=t=>{R(t.message)};let w=qe(v);w.onerror=N,ie+=1;const D=(t,a)=>{b[t]=a},C=(t,a)=>{O[t]=a},m=({id:t,action:a,payload:u})=>new Promise((d,h)=>{ne(`[${y}]: Start ${t}, action=${a}`);const g=`${a}-${t}`;D(g,d),C(g,h),Qe(w,{workerId:y,jobId:t,action:a,payload:u})}),z=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),B=t=>m(S({id:t,action:"load",payload:{options:{lstmOnly:A,corePath:v.corePath,logging:v.logging}}})),U=(t,a,u)=>m(S({id:u,action:"FS",payload:{method:"writeFile",args:[t,a]}})),I=(t,a)=>m(S({id:a,action:"FS",payload:{method:"readFile",args:[t,{encoding:"utf8"}]}})),J=(t,a)=>m(S({id:a,action:"FS",payload:{method:"unlink",args:[t]}})),F=(t,a,u)=>m(S({id:u,action:"FS",payload:{method:t,args:a}})),Z=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),Y=(t,a)=>m(S({id:a,action:"loadLanguage",payload:{langs:t,options:{langPath:v.langPath,dataPath:v.dataPath,cachePath:v.cachePath,cacheMethod:v.cacheMethod,gzip:v.gzip,lstmOnly:[G.DEFAULT,G.LSTM_ONLY].includes(f)&&!v.legacyLang}}})),Q=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),j=(t,a,u,d)=>m(S({id:d,action:"initialize",payload:{langs:t,oem:a,config:u}})),K=(t="eng",a,u,d)=>{if(A&&[G.TESSERACT_ONLY,G.TESSERACT_LSTM_COMBINED].includes(a))throw Error("Legacy model requested but code missing.");const h=a||f;f=h;const g=u||L;L=g;const T=(typeof t=="string"?t.split("+"):t).filter(_=>!k.includes(_));return k.push(...T),T.length>0?Y(T,d).then(()=>j(t,h,g,d)):j(t,h,g,d)},H=(t={},a)=>m(S({id:a,action:"setParameters",payload:{params:t}})),q=async(t,a={},u={blocks:!0,text:!0,hocr:!0,tsv:!0},d)=>m(S({id:d,action:"recognize",payload:{image:await ae(t),options:a,output:u}})),o=(t="Tesseract OCR Result",a=!1,u)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),m(S({id:u,action:"getPDF",payload:{title:t,textonly:a}}))),e=async(t,a)=>{if(A)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return m(S({id:a,action:"detect",payload:{image:await ae(t)}}))},n=async()=>(w!==null&&(Ve(w),w=null),Promise.resolve());Ze(w,({workerId:t,jobId:a,status:u,action:d,data:h})=>{const g=`${d}-${a}`;if(u==="resolve"){ne(`[${t}]: Complete ${a}`);let M=h;d==="recognize"?M=Ke(h):d==="getPDF"&&(M=Array.from({...h,length:Object.keys(h).length})),b[g]({jobId:a,data:M})}else if(u==="reject")if(O[g](h),d==="load"&&R(h),p)p(h);else throw Error(h);else u==="progress"&&E({...h,userJobId:a})});const c={id:y,worker:w,setResolve:D,setReject:C,load:z,writeText:U,readText:I,removeFile:J,FS:F,loadLanguage:Z,initialize:Q,reinitialize:K,setParameters:H,recognize:q,getPDF:o,detect:e,terminate:n};return B().then(()=>Y(r)).then(()=>j(r,i,l)).then(()=>$(c)).catch(()=>{}),P};const ue=le,Xe=async(r,i,s)=>{const l=await ue(i,1,s);return l.recognize(r).finally(async()=>{await l.terminate()})},xe=async(r,i)=>{const s=await ue("osd",0,i);return s.detect(r).finally(async()=>{await s.terminate()})};var et={recognize:Xe,detect:xe},tt={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},rt={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const ot=ve,nt=le,at=et,it=tt,st=ce,ct=rt,{setLogging:lt}=W;var ut={languages:it,OEM:st,PSM:ct,createScheduler:ot,createWorker:nt,setLogging:lt,...at};const ht=fe(ut);export{ht as T,ft as a,ye as c,dt as g};
//# sourceMappingURL=tesseract-0VhiVChX.js.map
