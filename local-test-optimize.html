<!DOCTYPE html>
<html>
<head>
    <title>Local OCR Performance Test & Optimization</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 1900px;
            margin: 0 auto;
            background: #f0f0f0;
        }
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .test-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .sample-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .sample-btn {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
            background: #f8f9fa;
        }
        .sample-btn:hover {
            border-color: #1e3c72;
            background: #e3f2fd;
        }
        .sample-btn.active {
            border-color: #1e3c72;
            background: #1e3c72;
            color: white;
        }
        .optimization-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        .param-group {
            background: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .param-group h4 {
            margin-top: 0;
            color: #1e3c72;
        }
        .param-slider {
            width: 100%;
            margin: 10px 0;
        }
        .param-value {
            font-weight: bold;
            color: #2a5298;
        }
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .result-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .result-card h3 {
            margin-top: 0;
            padding: 10px;
            margin: -20px -20px 15px -20px;
            border-radius: 8px 8px 0 0;
            color: white;
            text-align: center;
        }
        .tesseract-card h3 { background: #4CAF50; }
        .paddle-card h3 { background: #2196F3; }
        .metrics-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .metrics-table td {
            padding: 8px;
            border-bottom: 1px solid #eee;
        }
        .metrics-table td:first-child {
            font-weight: bold;
            color: #666;
        }
        .metrics-table td:last-child {
            text-align: right;
            font-weight: bold;
        }
        .better { color: #4CAF50; }
        .worse { color: #f44336; }
        .optimization-log {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            white-space: pre-wrap;
        }
        .action-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }
        .primary-btn {
            background: #1e3c72;
            color: white;
        }
        .primary-btn:hover {
            background: #2a5298;
        }
        .success-btn {
            background: #4CAF50;
            color: white;
        }
        .warning-btn {
            background: #ff9800;
            color: white;
        }
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
        }
        .info { background: #d1ecf1; color: #0c5460; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .performance-chart {
            height: 200px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            position: relative;
            margin: 20px 0;
        }
        .chart-bar {
            position: absolute;
            bottom: 0;
            width: 30px;
            background: #2196F3;
            transition: height 0.3s;
            border-radius: 5px 5px 0 0;
        }
        .optimize-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-left: 10px;
            vertical-align: middle;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }
        .optimize-active { background: #4CAF50; }
        .optimize-inactive { background: #ccc; }
        #preview {
            max-width: 100%;
            max-height: 400px;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 20px auto;
            display: block;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üî¨ Local OCR Performance Test & Optimization Lab</h1>
        <p>Test and optimize PaddleOCR configurations to outperform Tesseract</p>
    </div>
    
    <div class="test-section">
        <h2>1. Select Test Image</h2>
        <div class="sample-images">
            <div class="sample-btn" data-sample="text-document">
                üìÑ Text Document
            </div>
            <div class="sample-btn" data-sample="infographic">
                üé® Infographic
            </div>
            <div class="sample-btn" data-sample="receipt">
                üßæ Receipt
            </div>
            <div class="sample-btn" data-sample="id-card">
                üÜî ID Card
            </div>
            <div class="sample-btn" data-sample="pdf-page">
                üìë PDF Page
            </div>
            <div class="sample-btn" data-sample="handwritten">
                ‚úçÔ∏è Handwritten
            </div>
        </div>
        <p>Or upload your own: <input type="file" id="fileInput" accept="image/*"></p>
        <img id="preview" style="display: none;">
    </div>
    
    <div class="test-section">
        <h2>2. Parameter Optimization</h2>
        <div class="optimization-controls">
            <div class="param-group">
                <h4>Detection Parameters</h4>
                <label>Detection Threshold: <span class="param-value" id="detThreshValue">0.3</span></label>
                <input type="range" class="param-slider" id="detThresh" min="0.05" max="0.5" step="0.05" value="0.3">
                
                <label>Box Threshold: <span class="param-value" id="boxThreshValue">0.5</span></label>
                <input type="range" class="param-slider" id="boxThresh" min="0.1" max="0.9" step="0.1" value="0.5">
                
                <label>Max Candidates: <span class="param-value" id="maxCandidatesValue">1000</span></label>
                <input type="range" class="param-slider" id="maxCandidates" min="100" max="5000" step="100" value="1000">
            </div>
            
            <div class="param-group">
                <h4>Recognition Parameters</h4>
                <label>Drop Score: <span class="param-value" id="dropScoreValue">0.5</span></label>
                <input type="range" class="param-slider" id="dropScore" min="0.1" max="0.9" step="0.1" value="0.5">
                
                <label>Batch Size: <span class="param-value" id="batchSizeValue">16</span></label>
                <input type="range" class="param-slider" id="batchSize" min="1" max="64" step="1" value="16">
            </div>
            
            <div class="param-group">
                <h4>Preprocessing</h4>
                <label>Contrast Factor: <span class="param-value" id="contrastValue">1.5</span></label>
                <input type="range" class="param-slider" id="contrastFactor" min="0.5" max="3.0" step="0.1" value="1.5">
                
                <label>Sharpen Amount: <span class="param-value" id="sharpenValue">1.0</span></label>
                <input type="range" class="param-slider" id="sharpenAmount" min="0" max="2.0" step="0.1" value="1.0">
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="primary-btn" id="testCurrentBtn">üß™ Test Current Configuration</button>
            <button class="success-btn" id="autoOptimizeBtn">‚ö° Auto-Optimize Parameters</button>
            <button class="warning-btn" id="compareAllBtn">üìä Compare All Configurations</button>
        </div>
    </div>
    
    <div id="status" class="status info">Initializing OCR engines...</div>
    
    <div class="test-section" id="resultsSection" style="display: none;">
        <h2>3. Test Results <span class="optimize-indicator" id="optimizeIndicator"></span></h2>
        <div class="results-grid">
            <div class="result-card tesseract-card">
                <h3>Tesseract (Baseline)</h3>
                <table class="metrics-table">
                    <tr>
                        <td>Processing Time:</td>
                        <td id="tesseractTime">-</td>
                    </tr>
                    <tr>
                        <td>Characters Detected:</td>
                        <td id="tesseractChars">-</td>
                    </tr>
                    <tr>
                        <td>Word Count:</td>
                        <td id="tesseractWords">-</td>
                    </tr>
                    <tr>
                        <td>Confidence:</td>
                        <td id="tesseractConfidence">-</td>
                    </tr>
                    <tr>
                        <td>Overall Score:</td>
                        <td id="tesseractScore">-</td>
                    </tr>
                </table>
            </div>
            
            <div class="result-card paddle-card">
                <h3>PaddleOCR (Optimized)</h3>
                <table class="metrics-table">
                    <tr>
                        <td>Processing Time:</td>
                        <td id="paddleTime">-</td>
                    </tr>
                    <tr>
                        <td>Characters Detected:</td>
                        <td id="paddleChars">-</td>
                    </tr>
                    <tr>
                        <td>Word Count:</td>
                        <td id="paddleWords">-</td>
                    </tr>
                    <tr>
                        <td>Confidence:</td>
                        <td id="paddleConfidence">-</td>
                    </tr>
                    <tr>
                        <td>Overall Score:</td>
                        <td id="paddleScore">-</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <div class="performance-chart" id="performanceChart">
            <!-- Chart bars will be added dynamically -->
        </div>
        
        <h3>Optimization Log</h3>
        <div class="optimization-log" id="optimizationLog">
> Ready to optimize...
        </div>
    </div>

    <script type="module">
        import { ppOCRImprovedEngine } from './src/ppocr-improved-engine.js';
        import { tesseractOCREngine } from './src/tesseract-ocr-engine.js';
        import { INFOGRAPHIC_OCR_CONFIG, updatePaddleOCRConfig } from './src/infographic-ocr-config.js';
        import { 
            DOCUMENT_OCR_CONFIG, 
            RECEIPT_OCR_CONFIG,
            updatePaddleOCRForDocuments 
        } from './src/document-ocr-config.js';
        import { PDF_OCR_CONFIG, updatePaddleOCRForPDF } from './src/pdf-ocr-config.js';
        
        let currentImage = null;
        let currentSample = null;
        let isOptimizing = false;
        let bestConfiguration = null;
        
        // Sample image data (base64 encoded small test images)
        const sampleImages = {
            'text-document': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==', // Placeholder
            'infographic': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
            'receipt': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
            'id-card': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
            'pdf-page': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==',
            'handwritten': 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=='
        };
        
        // Initialize OCR engines
        async function initializeOCR() {
            log('Initializing OCR engines...');
            try {
                await Promise.all([
                    ppOCRImprovedEngine.initialize((progress) => {
                        log(`PaddleOCR: ${progress.message}`);
                    }),
                    tesseractOCREngine.initialize((progress) => {
                        log(`Tesseract: ${progress.message}`);
                    })
                ]);
                setStatus('OCR engines ready! Select a test image to begin.', 'success');
                log('> Initialization complete!');
            } catch (error) {
                setStatus('Failed to initialize OCR: ' + error.message, 'error');
                log(`> ERROR: ${error.message}`);
            }
        }
        
        // Sample selection
        document.querySelectorAll('.sample-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.sample-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                currentSample = e.target.dataset.sample;
                
                // In a real implementation, load actual sample images
                log(`> Selected sample: ${currentSample}`);
                setStatus(`Please upload an actual ${currentSample} image to test`, 'info');
            });
        });
        
        // File upload
        document.getElementById('fileInput').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file && file.type.startsWith('image/')) {
                loadFile(file);
            }
        });
        
        function loadFile(file) {
            const reader = new FileReader();
            reader.onload = (e) => {
                currentImage = e.target.result;
                document.getElementById('preview').src = currentImage;
                document.getElementById('preview').style.display = 'block';
                setStatus('Image loaded. Ready to test!', 'success');
                log(`> Loaded image: ${file.name}`);
            };
            reader.readAsDataURL(file);
        }
        
        // Parameter sliders
        document.querySelectorAll('.param-slider').forEach(slider => {
            slider.addEventListener('input', (e) => {
                const valueSpan = document.getElementById(e.target.id + 'Value');
                valueSpan.textContent = e.target.value;
            });
        });
        
        // Test current configuration
        document.getElementById('testCurrentBtn').addEventListener('click', async () => {
            if (!currentImage) {
                setStatus('Please select or upload an image first', 'error');
                return;
            }
            
            await runTest();
        });
        
        // Run OCR test
        async function runTest() {
            setStatus('Running OCR test...', 'info');
            document.getElementById('resultsSection').style.display = 'block';
            updateOptimizeIndicator(true);
            
            const response = await fetch(currentImage);
            const blob = await response.blob();
            
            // Get current parameters
            const params = getCurrentParameters();
            log(`> Testing with parameters: ${JSON.stringify(params, null, 2)}`);
            
            // Apply parameters to PaddleOCR
            applyParameters(params);
            
            // Run Tesseract
            const tesseractStart = Date.now();
            const tesseractResults = await tesseractOCREngine.process(blob);
            const tesseractTime = Date.now() - tesseractStart;
            
            // Run PaddleOCR
            const paddleStart = Date.now();
            const paddleResults = await ppOCRImprovedEngine.process(blob);
            const paddleTime = Date.now() - paddleStart;
            
            // Calculate metrics
            const tesseractMetrics = calculateMetrics(tesseractResults, tesseractTime);
            const paddleMetrics = calculateMetrics(paddleResults, paddleTime);
            
            // Display results
            displayResults('tesseract', tesseractMetrics);
            displayResults('paddle', paddleMetrics);
            
            // Compare performance
            const comparison = comparePerformance(tesseractMetrics, paddleMetrics);
            log(`> Performance: PaddleOCR ${comparison.verdict}`);
            
            updateOptimizeIndicator(false);
            updatePerformanceChart(tesseractMetrics.score, paddleMetrics.score);
            
            return { tesseractMetrics, paddleMetrics, comparison };
        }
        
        // Get current parameters
        function getCurrentParameters() {
            return {
                det_db_thresh: parseFloat(document.getElementById('detThresh').value),
                det_db_box_thresh: parseFloat(document.getElementById('boxThresh').value),
                det_db_max_candidates: parseInt(document.getElementById('maxCandidates').value),
                drop_score: parseFloat(document.getElementById('dropScore').value),
                rec_batch_num: parseInt(document.getElementById('batchSize').value),
                contrast_factor: parseFloat(document.getElementById('contrastFactor').value),
                sharpen_amount: parseFloat(document.getElementById('sharpenAmount').value)
            };
        }
        
        // Apply parameters to PaddleOCR
        function applyParameters(params) {
            ppOCRImprovedEngine.CONFIG.det_db_thresh = params.det_db_thresh;
            ppOCRImprovedEngine.CONFIG.det_db_box_thresh = params.det_db_box_thresh;
            ppOCRImprovedEngine.CONFIG.det_db_max_candidates = params.det_db_max_candidates;
            ppOCRImprovedEngine.CONFIG.drop_score = params.drop_score;
            ppOCRImprovedEngine.CONFIG.rec_batch_num = params.rec_batch_num;
            // Note: contrast and sharpen would need to be applied in preprocessing
        }
        
        // Auto-optimize parameters
        document.getElementById('autoOptimizeBtn').addEventListener('click', async () => {
            if (!currentImage) {
                setStatus('Please select or upload an image first', 'error');
                return;
            }
            
            isOptimizing = true;
            setStatus('Auto-optimizing parameters...', 'info');
            log('> Starting auto-optimization...');
            
            let bestScore = 0;
            let bestParams = getCurrentParameters();
            let iterations = 0;
            
            // Parameter ranges to test
            const paramRanges = {
                det_db_thresh: [0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4],
                det_db_box_thresh: [0.3, 0.4, 0.5, 0.6, 0.7],
                det_db_max_candidates: [1000, 2000, 3000, 4000],
                drop_score: [0.3, 0.4, 0.5, 0.6, 0.7]
            };
            
            // Grid search optimization
            for (const det_thresh of paramRanges.det_db_thresh) {
                for (const box_thresh of paramRanges.det_db_box_thresh) {
                    for (const max_candidates of paramRanges.det_db_max_candidates) {
                        for (const drop_score of paramRanges.drop_score) {
                            if (!isOptimizing) break;
                            
                            iterations++;
                            log(`> Iteration ${iterations}: Testing det=${det_thresh}, box=${box_thresh}, max=${max_candidates}, drop=${drop_score}`);
                            
                            // Update sliders
                            updateSliders({
                                det_db_thresh: det_thresh,
                                det_db_box_thresh: box_thresh,
                                det_db_max_candidates: max_candidates,
                                drop_score: drop_score,
                                rec_batch_num: bestParams.rec_batch_num,
                                contrast_factor: bestParams.contrast_factor,
                                sharpen_amount: bestParams.sharpen_amount
                            });
                            
                            // Test configuration
                            const result = await runTest();
                            
                            if (result.paddleMetrics.score > bestScore) {
                                bestScore = result.paddleMetrics.score;
                                bestParams = getCurrentParameters();
                                log(`> New best score: ${bestScore.toFixed(2)}`);
                            }
                            
                            // Early stopping if we're significantly better than Tesseract
                            if (result.comparison.scoreRatio > 1.5) {
                                log('> Early stopping: Achieved 50% better performance than Tesseract!');
                                break;
                            }
                        }
                    }
                }
            }
            
            // Apply best parameters
            updateSliders(bestParams);
            await runTest();
            
            isOptimizing = false;
            setStatus(`Optimization complete! Best score: ${bestScore.toFixed(2)}`, 'success');
            log(`> Optimization finished after ${iterations} iterations`);
            log(`> Best parameters: ${JSON.stringify(bestParams, null, 2)}`);
        });
        
        // Compare all configurations
        document.getElementById('compareAllBtn').addEventListener('click', async () => {
            if (!currentImage) {
                setStatus('Please select or upload an image first', 'error');
                return;
            }
            
            setStatus('Comparing all configurations...', 'info');
            log('> Running comprehensive comparison...');
            
            const response = await fetch(currentImage);
            const blob = await response.blob();
            
            // Test all configurations
            const configs = [
                { name: 'Standard', apply: () => {} },
                { name: 'Infographic', apply: () => updatePaddleOCRConfig(ppOCRImprovedEngine) },
                { name: 'Document', apply: () => updatePaddleOCRForDocuments(ppOCRImprovedEngine, 'general') },
                { name: 'Receipt', apply: () => updatePaddleOCRForDocuments(ppOCRImprovedEngine, 'receipt') },
                { name: 'PDF', apply: () => updatePaddleOCRForPDF(ppOCRImprovedEngine) }
            ];
            
            let bestConfig = null;
            let bestScore = 0;
            
            for (const config of configs) {
                log(`\n> Testing ${config.name} configuration...`);
                config.apply();
                
                const paddleStart = Date.now();
                const paddleResults = await ppOCRImprovedEngine.process(blob);
                const paddleTime = Date.now() - paddleStart;
                
                const metrics = calculateMetrics(paddleResults, paddleTime);
                log(`  Score: ${metrics.score.toFixed(2)}, Chars: ${metrics.totalChars}, Time: ${metrics.processingTime}ms`);
                
                if (metrics.score > bestScore) {
                    bestScore = metrics.score;
                    bestConfig = config.name;
                }
            }
            
            log(`\n> Best configuration: ${bestConfig} (Score: ${bestScore.toFixed(2)})`);
            setStatus(`Best configuration: ${bestConfig}`, 'success');
        });
        
        // Calculate metrics
        function calculateMetrics(results, processingTime) {
            if (!results || results.length === 0) {
                return {
                    processingTime,
                    totalChars: 0,
                    wordCount: 0,
                    avgConfidence: 0,
                    score: 0
                };
            }
            
            const allText = results.map(r => r.text).join(' ');
            const words = allText.split(/\s+/).filter(w => w.length > 0);
            const totalConfidence = results.reduce((sum, r) => sum + (r.confidence || 0), 0);
            const avgConfidence = Math.round((totalConfidence / results.length) * 100);
            
            // Score calculation
            const textScore = Math.min(100, allText.length / 10);
            const confidenceScore = avgConfidence;
            const speedScore = Math.max(0, 100 - (processingTime / 20));
            const score = textScore * 0.4 + confidenceScore * 0.3 + speedScore * 0.3;
            
            return {
                processingTime,
                totalChars: allText.length,
                wordCount: words.length,
                avgConfidence,
                score: Math.round(score)
            };
        }
        
        // Display results
        function displayResults(engine, metrics) {
            const prefix = engine === 'tesseract' ? 'tesseract' : 'paddle';
            document.getElementById(`${prefix}Time`).textContent = `${metrics.processingTime}ms`;
            document.getElementById(`${prefix}Chars`).textContent = metrics.totalChars;
            document.getElementById(`${prefix}Words`).textContent = metrics.wordCount;
            document.getElementById(`${prefix}Confidence`).textContent = `${metrics.avgConfidence}%`;
            document.getElementById(`${prefix}Score`).textContent = metrics.score;
        }
        
        // Compare performance
        function comparePerformance(tesseractMetrics, paddleMetrics) {
            const scoreRatio = paddleMetrics.score / tesseractMetrics.score;
            const charRatio = paddleMetrics.totalChars / tesseractMetrics.totalChars;
            
            let verdict = '';
            if (scoreRatio > 1.2) {
                verdict = 'significantly outperforms Tesseract ‚úÖ';
            } else if (scoreRatio > 1.0) {
                verdict = 'slightly outperforms Tesseract ‚úì';
            } else if (scoreRatio > 0.9) {
                verdict = 'performs similarly to Tesseract ‚âà';
            } else {
                verdict = 'underperforms Tesseract ‚úó';
            }
            
            // Update comparison indicators
            const paddleValues = document.querySelectorAll('.paddle-card td:last-child');
            paddleValues.forEach((td, index) => {
                if (index < 4) { // Skip the score row
                    const tesseractValue = parseFloat(document.querySelector(`.tesseract-card tr:nth-child(${index + 1}) td:last-child`).textContent);
                    const paddleValue = parseFloat(td.textContent);
                    
                    if (index === 0) { // Processing time - lower is better
                        td.className = paddleValue < tesseractValue ? 'better' : 'worse';
                    } else { // Other metrics - higher is better
                        td.className = paddleValue > tesseractValue ? 'better' : 'worse';
                    }
                }
            });
            
            return { scoreRatio, charRatio, verdict };
        }
        
        // Update sliders
        function updateSliders(params) {
            Object.entries(params).forEach(([key, value]) => {
                const slider = document.getElementById(key.replace(/_/g, ''));
                if (slider) {
                    slider.value = value;
                    document.getElementById(slider.id + 'Value').textContent = value;
                }
            });
        }
        
        // Update performance chart
        function updatePerformanceChart(tesseractScore, paddleScore) {
            const chart = document.getElementById('performanceChart');
            chart.innerHTML = '';
            
            const maxScore = Math.max(tesseractScore, paddleScore, 100);
            
            // Tesseract bar
            const tesseractBar = document.createElement('div');
            tesseractBar.className = 'chart-bar';
            tesseractBar.style.left = '20%';
            tesseractBar.style.height = `${(tesseractScore / maxScore) * 180}px`;
            tesseractBar.style.background = '#4CAF50';
            chart.appendChild(tesseractBar);
            
            // PaddleOCR bar
            const paddleBar = document.createElement('div');
            paddleBar.className = 'chart-bar';
            paddleBar.style.left = '60%';
            paddleBar.style.height = `${(paddleScore / maxScore) * 180}px`;
            paddleBar.style.background = '#2196F3';
            chart.appendChild(paddleBar);
        }
        
        // Update optimize indicator
        function updateOptimizeIndicator(active) {
            const indicator = document.getElementById('optimizeIndicator');
            indicator.className = `optimize-indicator ${active ? 'optimize-active' : 'optimize-inactive'}`;
        }
        
        // Logging
        function log(message) {
            const logDiv = document.getElementById('optimizationLog');
            logDiv.textContent += message + '\n';
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        // Set status
        function setStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
        }
        
        // Initialize on load
        window.addEventListener('load', initializeOCR);
    </script>
</body>
</html>