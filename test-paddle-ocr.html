<!DOCTYPE html>
<html>
<head>
    <title>PaddleOCR Test</title>
    <script type="module">
        import * as ort from 'https://cdn.jsdelivr.net/npm/onnxruntime-web@1.22.0/dist/ort.min.js';
        
        async function testONNXRuntime() {
            console.log('ONNX Runtime version:', ort.env.versions.onnxruntime);
            console.log('Available backends:', ort.env.wasm ? 'WASM available' : 'WASM not available');
            
            // Test loading a simple model
            try {
                // Create a simple test tensor
                const testData = new Float32Array([1, 2, 3, 4]);
                const testTensor = new ort.Tensor('float32', testData, [2, 2]);
                console.log('Test tensor created:', testTensor);
                
                // Test WebGL backend
                try {
                    console.log('Testing WebGL backend...');
                    const session = await ort.InferenceSession.create('/client-ocr-app/models/PP-OCRv5_mobile_det_infer.onnx', {
                        executionProviders: ['webgl']
                    });
                    console.log('WebGL backend works!');
                    await session.release();
                } catch (e) {
                    console.error('WebGL backend failed:', e.message);
                }
                
                // Test WASM backend
                try {
                    console.log('Testing WASM backend...');
                    const session = await ort.InferenceSession.create('/client-ocr-app/models/PP-OCRv5_mobile_det_infer.onnx', {
                        executionProviders: ['wasm']
                    });
                    console.log('WASM backend works!');
                    console.log('Input names:', session.inputNames);
                    console.log('Output names:', session.outputNames);
                    await session.release();
                } catch (e) {
                    console.error('WASM backend failed:', e.message);
                }
                
            } catch (error) {
                console.error('Test failed:', error);
            }
        }
        
        window.onload = testONNXRuntime;
    </script>
</head>
<body>
    <h1>PaddleOCR ONNX Runtime Test</h1>
    <p>Check the browser console for test results.</p>
</body>
</html>